<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Red de Carga GLP - JM Autogas</title>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&display=swap" rel="stylesheet">
  <style>
    :root {
      /* --- VARIABLES MODO OLED (Dark) --- */
      --bg-deep: #000000;
      --text-main: #ffffff;
      --text-sec: #a3a3a3;
      
      --card-bg: rgba(18, 18, 18, 0.95);
      --card-border: rgba(255, 255, 255, 0.15);
      --input-bg: rgba(30, 30, 30, 0.9);
      
      --accent: #22c55e;
      --accent-glow: rgba(34, 197, 94, 0.5);
      
      --btn-bg: linear-gradient(135deg, #25D366 0%, #128C7E 100%);
    }

    /* --- VARIABLES MODO LIGHT --- */
    [data-theme="light"] {
      --bg-deep: #f0f2f5;
      --text-main: #0f172a;
      --text-sec: #64748b;
      
      --card-bg: #ffffff;
      --card-border: rgba(0, 0, 0, 0.1);
      --input-bg: #f8fafc;
      
      --accent: #16a34a;
      --accent-glow: rgba(22, 163, 74, 0.2);
    }

    * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1); }

    body {
      font-family: 'Outfit', sans-serif;
      background-color: var(--bg-deep);
      color: var(--text-main);
      margin: 0; padding: 0;
      min-height: 100vh;
      overflow-x: hidden;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    /* --- FONDO ESTELAR --- */
    .stars-container {
      position: fixed; top: 0; left: 0; right: 0; bottom: 0; z-index: -1; pointer-events: none;
    }
    [data-theme="light"] .stars-container { filter: invert(1) opacity(0.2); }
    
    .stars {
      width: 2px; height: 2px; background: transparent;
      box-shadow: 140px 140px #FFF, 540px 340px #FFF, 340px 940px #FFF, 
                  740px 240px #FFF, 840px 440px #FFF, 240px 540px #FFF;
      animation: animStar 80s linear infinite;
    }
    @keyframes animStar { from { transform: translateY(0px); } to { transform: translateY(-2000px); } }

    /* --- UI COMPONENTS --- */
    .theme-toggle {
      position: fixed; top: 20px; right: 20px; z-index: 200;
      background: var(--card-bg); color: var(--text-main);
      border: 1px solid var(--card-border);
      width: 45px; height: 45px; border-radius: 50%;
      cursor: pointer; display: flex; align-items: center; justify-content: center;
      font-size: 1.2rem; backdrop-filter: blur(10px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    }

    .main-container {
      width: 100%; max-width: 600px;
      padding: 40px 20px;
      z-index: 10;
    }

    h2 {
      text-align: center; font-size: 2.2rem; font-weight: 800; margin-bottom: 5px; margin-top: 20px;
      background: linear-gradient(90deg, #166534 0%, #22c55e 25%, #4ade80 50%, #166534 100%);
      background-size: 200% auto;
      -webkit-background-clip: text; -webkit-text-fill-color: transparent;
      animation: rgbFlow 4s linear infinite;
      letter-spacing: -1px; line-height: 1.1;
    }
    @keyframes rgbFlow { to { background-position: 200% center; } }

    .subtitle {
      text-align: center; color: var(--text-sec); margin-bottom: 30px;
      font-size: 0.95rem; line-height: 1.4;
    }

    /* --- FORMULARIO --- */
    .control-group {
      display: flex; flex-direction: column; gap: 15px;
      background: var(--card-bg);
      padding: 20px; border-radius: 20px;
      border: 1px solid var(--card-border);
      box-shadow: 0 10px 40px -10px rgba(0,0,0,0.5);
    }

    label {
      font-size: 0.75rem; font-weight: 700; color: var(--accent);
      text-transform: uppercase; letter-spacing: 1.2px; margin-left: 5px;
    }

    select {
      width: 100%;
      padding: 16px 20px;
      background: var(--input-bg);
      border: 1px solid var(--card-border);
      border-radius: 12px;
      color: var(--text-main);
      font-size: 1rem; font-family: 'Outfit', sans-serif; font-weight: 500;
      appearance: none; cursor: pointer;
      background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%2322c55e' stroke-width='3' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
      background-repeat: no-repeat; background-position: right 20px center; background-size: 14px;
    }

    select:focus { outline: none; border-color: var(--accent); box-shadow: 0 0 20px var(--accent-glow); }
    select:disabled { opacity: 0.4; cursor: not-allowed; filter: grayscale(1); }

    /* --- RESULTADOS --- */
    .resultados-grid {
      margin-top: 25px;
      display: grid; gap: 15px;
      padding-bottom: 50px;
    }

    .station-card {
      background: var(--card-bg);
      padding: 18px; border-radius: 16px;
      border: 1px solid var(--card-border);
      display: flex; flex-direction: column; gap: 12px;
      position: relative; overflow: hidden;
      animation: popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
      opacity: 0; transform: scale(0.95);
    }

    .station-card:hover { border-color: var(--accent); transform: translateY(-2px); }

    .station-card::before {
      content:''; position: absolute; left: 0; top: 0; bottom: 0; width: 4px;
      background: var(--accent); box-shadow: 2px 0 10px var(--accent-glow);
    }

    .station-header {
      display: flex; justify-content: space-between; align-items: center;
    }

    .station-comuna {
      font-size: 0.75rem; color: var(--accent); font-weight: 800;
      text-transform: uppercase; letter-spacing: 1px;
      background: rgba(34, 197, 94, 0.1); padding: 4px 8px; border-radius: 6px;
    }

    /* P√≠ldora del Logo (Fondo blanco para contraste) */
    .brand-pill {
      background: #ffffff;
      padding: 4px 10px;
      border-radius: 50px;
      display: flex; align-items: center; justify-content: center;
      height: 32px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    .brand-logo {
      height: 20px; /* Tama√±o ajustado al texto */
      width: auto;
      object-fit: contain;
      display: block;
    }

    .station-address {
      font-size: 1.1rem; font-weight: 700; color: var(--text-main);
      line-height: 1.3; margin-top: -5px;
    }

    .map-btn {
      margin-top: 5px;
      background: var(--btn-bg);
      color: white; text-decoration: none;
      padding: 14px; border-radius: 12px;
      text-align: center; font-weight: 800; text-transform: uppercase; letter-spacing: 0.5px;
      display: flex; align-items: center; justify-content: center; gap: 10px;
      font-size: 0.9rem;
      box-shadow: 0 4px 15px rgba(37, 211, 102, 0.2);
    }
    
    .map-btn:active { transform: scale(0.97); }

    /* Empty State */
    .empty-state { text-align: center; margin-top: 60px; opacity: 0.4; animation: fadeIn 1s; }
    .empty-icon { font-size: 5rem; margin-bottom: 10px; filter: grayscale(1); transition: 0.3s; }
    [data-theme="light"] .empty-icon { filter: grayscale(0); }

    @keyframes popIn { to { opacity: 1; transform: scale(1); } }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 0.4; } }

    @media(max-width: 480px) {
      .main-container { padding: 80px 15px 40px; }
      h2 { font-size: 1.8rem; }
    }
  </style>
</head>
<body>

  <button class="theme-toggle" id="themeBtn">üåô</button>

  <div class="stars-container">
    <div class="stars"></div>
  </div>

  <div class="main-container">
    <h2>Zona de Carga GLP</h2>
    <p class="subtitle">Localiza estaciones certificadas y navega directo con GPS.</p>

    <div class="control-group">
      <div>
        <label for="regionFiltro">1. Elige Regi√≥n</label>
        <select id="regionFiltro">
          <option value="">Seleccionar...</option>
        </select>
      </div>

      <div>
        <label for="comunaFiltro">2. Elige Comuna (Opcional)</label>
        <select id="comunaFiltro" disabled>
          <option value="">Todas las comunas</option>
        </select>
      </div>
    </div>

    <div id="resultados" class="resultados-grid"></div>

    <div id="emptyState" class="empty-state">
      <div class="empty-icon">‚õΩ</div>
      <p style="font-weight:600;">Selecciona una regi√≥n para escanear el √°rea.</p>
    </div>
  </div>

<script>
  // --- TEMA ---
  const themeBtn = document.getElementById('themeBtn');
  const html = document.documentElement;
  const savedTheme = localStorage.getItem('theme') || 'dark';
  html.setAttribute('data-theme', savedTheme);
  themeBtn.innerText = savedTheme === 'dark' ? '‚òÄÔ∏è' : 'üåô';

  themeBtn.addEventListener('click', () => {
    const current = html.getAttribute('data-theme');
    const next = current === 'dark' ? 'light' : 'dark';
    html.setAttribute('data-theme', next);
    localStorage.setItem('theme', next);
    themeBtn.innerText = next === 'dark' ? '‚òÄÔ∏è' : 'üåô';
  });

  // --- LOGOS URLS ---
  const logos = {
    "Gasco": "https://upload.wikimedia.org/wikipedia/commons/thumb/c/c0/Logo_Gasco.svg/1200px-Logo_Gasco.svg.png",
    "Abastible": "https://storage.googleapis.com/web-abastible-prod/2025/03/Logo_Abastible.png",
    "Lipigas": "https://3go.cl/wp-content/uploads/2018/05/logo-lipigas.png",
    "Copec": "https://upload.wikimedia.org/wikipedia/commons/thumb/9/92/Copec_Logo_2023.svg/2560px-Copec_Logo_2023.svg.png",
    "Petrobras": "https://upload.wikimedia.org/wikipedia/commons/thumb/b/be/Petrobras-Logo.svg/2560px-Petrobras-Logo.svg.png",
    "Shell": "https://1000marcas.net/wp-content/uploads/2019/12/Logo-Shell.png"
  };

  // --- BASE DE DATOS ---
  const estaciones = [
    // TARAPAC√Å
    { r: "Tarapac√°", c: "Iquique", d: "Desiderio Garcia 144", m: "Lipigas" },
    { r: "Tarapac√°", c: "Iquique", d: "Tadeo Hanke 1870", m: "Lipigas" },
    { r: "Tarapac√°", c: "Arica", d: "Alejandro Azolas 2693", m: "Gasco" },
    
    // ANTOFAGASTA
    { r: "Antofagasta", c: "Antofagasta", d: "Radomiro Tomic 7501", m: "Gasco" },
    { r: "Antofagasta", c: "Antofagasta", d: "Pedro Aguirre Cerda 6420", m: "Lipigas" },
    { r: "Antofagasta", c: "Calama", d: "Huaytiquina 1525", m: "Lipigas" },

    // ATACAMA
    { r: "Atacama", c: "Copiap√≥", d: "Los Loros 1264", m: "Gasco" },
    { r: "Atacama", c: "Vallenar", d: "Miraflores 510", m: "Lipigas" },

    // COQUIMBO
    { r: "Coquimbo", c: "La Serena", d: "Balmaceda 3850", m: "Gasco" },
    { r: "Coquimbo", c: "Coquimbo", d: "Las Azucenas 519", m: "Gasco" },

    // VALPARA√çSO
    { r: "Valpara√≠so", c: "Vi√±a del Mar", d: "Av. Alessandri 3401", m: "Abastible" },
    { r: "Valpara√≠so", c: "Quilpu√©", d: "Freire 677", m: "Gasco" },
    { r: "Valpara√≠so", c: "Quillota", d: "Blanco Encalada 661", m: "Gasco" },
    { r: "Valpara√≠so", c: "Valpara√≠so", d: "Av. Playa Ancha 697", m: "Gasco" },

    // METROPOLITANA
    { r: "Metropolitana", c: "Santiago", d: "Bascu√±√°n Guerrero 2445", m: "Copec" },
    { r: "Metropolitana", c: "Maip√∫", d: "Av. Pajaritos 400", m: "Gasco" },
    { r: "Metropolitana", c: "Maip√∫", d: "Alberto Llona 640", m: "Copec" },
    { r: "Metropolitana", c: "La Florida", d: "Av. Vicu√±a Mackenna 9841", m: "Gasco" },
    { r: "Metropolitana", c: "Puente Alto", d: "Eyzaguirre 2816", m: "Abastible" },
    { r: "Metropolitana", c: "Quinta Normal", d: "Vicu√±a Rozas 5891", m: "Abastible" },
    { r: "Metropolitana", c: "Independencia", d: "Av. Independencia 1517", m: "Copec" },
    { r: "Metropolitana", c: "Pe√±alol√©n", d: "Tobalaba 11567", m: "Copec" },
    { r: "Metropolitana", c: "Providencia", d: "Av. Francisco Bilbao 2682", m: "Copec" },
    { r: "Metropolitana", c: "Las Condes", d: "Crist√≥bal Col√≥n 7550", m: "Petrobras" },
    { r: "Metropolitana", c: "San Bernardo", d: "Padre Hurtado 15787", m: "Gasco" },
    { r: "Metropolitana", c: "Buin", d: "Ruta 5 Sur 993", m: "Lipigas" },

    // O'HIGGINS
    { r: "O'Higgins", c: "Rancagua", d: "Manuel Montt 0480", m: "Gasco" },
    { r: "O'Higgins", c: "Rengo", d: "Luis Jorquera 1291", m: "Gasco" },

    // MAULE
    { r: "Maule", c: "Curic√≥", d: "Av. Balmaceda 2323-B", m: "Gasco" },
    { r: "Maule", c: "Talca", d: "Uno Norte 2315", m: "Gasco" },
    { r: "Maule", c: "Linares", d: "Av. Le√≥n Bustos 1319", m: "Gasco" },

    // √ëUBLE
    { r: "√ëuble", c: "Chill√°n", d: "Av. Coll√≠n 1101", m: "Gasco" },

    // BIOB√çO
    { r: "Biob√≠o", c: "Concepci√≥n", d: "Anibal Pinto 1835", m: "Gasco" },
    { r: "Biob√≠o", c: "Los √Ångeles", d: "Av. Francisco Encina 1451", m: "Gasco" },
    { r: "Biob√≠o", c: "Talcahuano", d: "Gran Breta√±a 4561", m: "Gasco" },

    // ARAUCAN√çA
    { r: "Araucan√≠a", c: "Temuco", d: "Manuel Recabarren 01940", m: "Gasco" },
    { r: "Araucan√≠a", c: "Angol", d: "Juan Sallato 2938", m: "Gasco" },

    // LOS R√çOS
    { r: "Los R√≠os", c: "Valdivia", d: "Schneider 3620", m: "Gasco" },

    // LOS LAGOS
    { r: "Los Lagos", c: "Osorno", d: "Av. Mackenna 2019", m: "Gasco" },
    { r: "Los Lagos", c: "Puerto Montt", d: "Maximiliano Uribe 2067", m: "Gasco" },
    { r: "Los Lagos", c: "Castro", d: "O'Higgins 601", m: "Gasco" },

    // MAGALLANES
    { r: "Magallanes", c: "Punta Arenas", d: "Eduardo Frey 314", m: "Gasco" }
  ];

  const el = {
    region: document.getElementById("regionFiltro"),
    comuna: document.getElementById("comunaFiltro"),
    grid: document.getElementById("resultados"),
    empty: document.getElementById("emptyState")
  };

  function init() {
    const regionesUnicas = [...new Set(estaciones.map(e => e.r))].sort();
    regionesUnicas.forEach(r => {
      const opt = document.createElement("option");
      opt.value = r; opt.innerText = r;
      el.region.appendChild(opt);
    });

    el.region.addEventListener("change", () => {
      updateComunas(el.region.value);
      renderResults(); 
    });
    
    el.comuna.addEventListener("change", renderResults);
  }

  function updateComunas(region) {
    el.comuna.innerHTML = '<option value="">Todas las comunas</option>';
    if (!region) {
      el.comuna.disabled = true;
      return;
    }
    const comunas = [...new Set(estaciones.filter(e => e.r === region).map(e => e.c))].sort();
    comunas.forEach(c => {
      const opt = document.createElement("option");
      opt.value = c; opt.innerText = c;
      el.comuna.appendChild(opt);
    });
    el.comuna.disabled = false;
  }

  function renderResults() {
    const reg = el.region.value;
    const com = el.comuna.value;

    if (!reg) {
      el.grid.innerHTML = '';
      el.empty.style.display = 'block';
      return;
    }

    const matches = estaciones.filter(e => e.r === reg && (com === "" || e.c === com));
    el.grid.innerHTML = '';
    
    if (matches.length > 0) {
      el.empty.style.display = 'none';
      matches.forEach((est, index) => {
        const delay = index * 0.05;
        const query = encodeURIComponent(`${est.d}, ${est.c}, Chile`);
        const mapLink = `https://www.google.com/maps/search/?api=1&query=${query}`;
        
        // Obtener Logo o Texto Fallback
        const logoUrl = logos[est.m];
        const brandHtml = logoUrl 
          ? `<div class="brand-pill"><img src="${logoUrl}" alt="${est.m}" class="brand-logo"></div>` 
          : `<div class="brand-pill" style="font-weight:700; color:#333;">${est.m}</div>`;

        const card = document.createElement('div');
        card.className = 'station-card';
        card.style.animationDelay = `${delay}s`;
        
        card.innerHTML = `
          <div class="station-header">
            <span class="station-comuna">${est.c}</span>
            ${brandHtml}
          </div>
          <div class="station-address">${est.d}</div>
          <a href="${mapLink}" target="_blank" class="map-btn">
            üöó IR AHORA (GPS)
          </a>
        `;
        el.grid.appendChild(card);
      });
    } else {
      el.empty.style.display = 'block';
      el.empty.innerHTML = '<div class="empty-icon">‚ùå</div><p>No hay estaciones registradas en esta zona.</p>';
    }
  }

  init();
</script>
</body>
</html>
